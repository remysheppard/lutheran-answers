{{ define "main" }}

{{ $img := resources.Get "images/big-craig.png" }}
{{ $img = $img.Resize "500x webp q90" }}

<article class="text-brand-black dark:text-white">
  <section class="flex flex-row justify-between">
    <img src="{{ $img.RelPermalink }}" class="rounded" height="250">
    <div class="ml-10">
      <h2 class="text-brand-black dark:text-brand-purple">{{ .Title | markdownify }}</h3>
      <h3 class="text-brand-black dark:text-white">{{ .Params.subtitle | markdownify }}</h3>
      <p>
        {{ .Content }}
      </p>
    </div>
  </section>


  <div class="p-6 my-10">
    <div id="chat-box" class="h-40 overflow-y-auto mb-4"></div>
    <input id="user-input" type="text" class="border bg-transparent border-gray-300 rounded-lg px-3 py-2 w-full focus:outline-none focus:border-blue-500" placeholder="Please type a question - the more specific the better!">
</div>

<script>

const chatBox = document.getElementById("chat-box"),
    userInput = document.getElementById("user-input");

const responses = [
    "Go ask your pastor!",
    "I'm not sure, you should read your Bible.",
    "You know, there's probably a Lutheran Answers episode about that....",
    "Honestly? I have no clue! LOL",
    "This probably has nothing to do with your question, but have you read this Bible verse before? Reformed guys hate it: John 3:16: For God so loved the world, that he gave his only begotten Son...",
    "I'm the most advanced AI on earth. I have an IQ of 104 (that's four points higher than the maximum!). I have no idea what you're asking.",
    "I don't know about that, but I do know this one secret saying of Athanasius that Roman Catholics hate: The holy and inspired Scriptures are sufficient for the preaching of the truth."
];

userInput.addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
        const inputText = userInput.value.trim();
        if (inputText !== "") {
            appendMessage("user", inputText);
            respondToUser();
            userInput.value = "";
        }
    }
});

function appendMessage(role, text) {
    const messageDiv = document.createElement("div");
    messageDiv.className = `mb-2 text-sm ${role === "user" ? "text-right" : "text-left"}`;
    messageDiv.textContent = text;
    chatBox.appendChild(messageDiv);
    chatBox.scrollTop = chatBox.scrollHeight;
}

function respondToUser() {
    const randomIndex = Math.floor(Math.random() * responses.length);
    const response = responses[randomIndex];
    setTimeout(() => {
        appendMessage("bot", response);
    }, 700);
}
  
</script>

</article>

{{ end }}
